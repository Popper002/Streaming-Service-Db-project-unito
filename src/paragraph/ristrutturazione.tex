\section{Ristrutturazione schema E-R}
\includegraphics[width=\textwidth]{resources/e_r-ridotto.pdf}

\section{Analisi delle Ridondanze}
Le ridondanze trovate sono le seguenti:
\begin{enumerate}
    \item La relazione \textit{visualizza} collegata all'entità \textit{utente anonimo} è ridondante in quanto l'informazione è ricavabile dall'entità \textit{Canale}
    \item Il nome del canale è derivabile dal nickname dell'utente registrato
    \item Gli attributi dell'entità \textit{Contenuti} sono ricavabili dall' entità \textit{Canale}
    \item I messaggi inviati dagli utenti non hanno un identificativo che indica se è un messaggio pubblico o privato ,quindi se un messaggio si trova all'interno di una
          chat pubblica o privata esso sarà comunque un messaggio quindi è ricavabile dall'entità chat. 
\end{enumerate}
\subsubsection{Ridondanza dei messaggi pubblici/privati}
\begin{itemize}
    \item È possibile analizzare che in presenza di ridondanza il quantitativo di memoria contenuto nell'entità chat di messaggi è nettamente superiore ,poichè l'attributo Chat
          immagazina qualunque tipo di messaggi senza badare al fatto che sia publica o privata , il fatto che la chat sia pubblica o privata è influente per l'utente ,poichè esso avrà una quantità di utente con cui conversare 
          diversa in base a dove esso si trovi.
          Senza la ridondanza i messaggi vengono ri identificati e gestiti dalle singole chat in modo che ogni chat ha una sua gestione e quindi ha una quantità diversa di messaggi ,e quindi essi non vengono 
          raggruppati in un unica sezione di memoria. 

\end{itemize}

Si ipotizzano 1.000.000.000 di messaggi scambiati, con la ridondanza un messaggio non viene distinto tra pubblico e privato, quindi viene contato doppio
\subsubsection{Analisi con ridondanza}
Tempo impiegato : 2.000.000.000\footnote{i messaggi sono il doppio di quelli effettivi in quanto non vengono distinti} messaggi *1 ms /messaggio *2 (operazioni di read and write) $\simeq 32$ minuti per salvare tutti i messaggi. \\
Spazio:Si ipotizza 100 kb a messaggio. 
\small
\begin{longtable}{|l|c|c|p{6.2cm}|}
  \hline \textbf{Concetto} & \textbf{Tipo} & \textbf{Accessi} & \textbf{Tipo} \\\hline
  \endfirsthead

  \hline \textbf{Concetto} & \textbf{Tipo} & \textbf{Accessi} & \textbf{Tipo} \\\hline
  \endhead

  \hline \multicolumn{4}{|r|}{\textit{Continua alla pagina successiva}}
  \endfoot
    Utente Registrato & R/W & Conversare & 1.000.000.000 \\\hline
  \endlastfoot


\end{longtable}
\normalsize
\newpage
\subsubsection{Analisi senza ridondanza}
Tempo impiegato : 1.000.000.000 messaggi *1 ms /messaggio *2 (operazioni di read and write) $\simeq 16$ minuti per salvare tutti \\
Spazio:Si ipotizza 100 kb a messaggio. 
\newline
\small
\begin{longtable}{ |l|c|c|p{6.2cm}|}
  \hline \textbf{Concetto} & \textbf{Tipo} & \textbf{Accessi} & \textbf{Tipo} \\\hline
  \endfirsthead

  \hline \textbf{Concetto} & \textbf{Tipo} & \textbf{Accessi} & \textbf{Tipo} \\\hline
  \endhead

  \hline \multicolumn{4}{|r|}{\textit{Continua alla pagina successiva}}
  \endfoot

    Utente Registrato& R/W & Conversare & 2.000.000.000 \\\hline
  \endlastfoot

\end{longtable}
\normalsize
\section{Eliminazioni delle Generalizzazioni}
Le generalizzazioni presenti nello schema E-R sono:
\begin{enumerate}
    \item \textbf{Utente}: È una generalizzazione totale tra le entità \textit{Utente registrato} e \textit{Utente anonimo}, poichè o si è registrati alla piattaforma o si è anonimi
    \item \textbf{Streamer e Streamer-Spettatore}: È una generalizzazione parziale tra le entità \textit{Streamer} e \textit{Streamer-Spettatore}, in quanto l'utente registrato si ritrova a svolgere il ruolo o di streamer o di spettatore, ma sempre essendo uno streamer  
    \item \textbf{Spettatore - Utente Anonimo}: È una generalizzazione sovrapposta, poiché l'utente anonimo può essere solo spettatore'
    \item \textbf{Chat}: È una generalizzazione totale tra le entità \textit{Chat privata} e \textit{Chat pubblica}. Perché l'entià chat si divide in due sottoinsiemi, ovvero chat pubblica e chat privata.
\end{enumerate} 
\section{Partizionamento/Accorpamento di entità e associazioni}
Si è deciso di accorpare l'entità chat, così indica in maniera più coincisa che un utente registrato può comunicare in maniera pubblica o privata'''
\begin{figure}[ht]
    \centering
    \begin{minipage}{.45\textwidth}
        \centering
        \includegraphics[width=0.9\linewidth]{resources/chat_revised.png}
        \caption{Entità chat dopo l'accorpamento}
        \label{Entità chat dopo l'accorpamento}
    \end{minipage}%
    \begin{minipage}{.5\textwidth}
        \centering
        \includegraphics[width=0.9\linewidth]{resources/chat.png}
        \caption{Entità chat prima dell'accorpamento}
        \label{Entità chat prima dell'accorpamento}
    \end{minipage}
\end{figure}

\section{Business rules dell'E-R ristrutturato }
\begin{itemize}
    \item Gli attributi live ,video ,clip presenti nell'entità \textbf{canale} indicato un oggetto finito e caricato al suo interno.
    \item Gli attributi live ,vide ,clip presenti sull'entitá \textbf{contenuti} indicano un oggetto che ancora o è in fase di produzione o è un prodotto finito ma non caricato sul canale del proprietario. 
    \item Gli utenti anonimi non possono supportare gli streamer. 
    \item Gli streamer sono utenti registrati che caricano  o trasmettono contenuti. 
    \item Ogni utente registrato ha un nickname. 
    \item Il nickname scelto dall'utente registrato sarà anche il nome del canale. 
    \item Ogni canale ha una Descrizione. 
    \item Le live sono contenuti o in tempo reale.
    \item I video sono live già concluse. 
    \item Le clip sono brevi estratti di video. 
    \item Un utente anonimo non può conversare con altri utenti.
    \item Un utente anonimo non possiede un canale. 
\end{itemize}
